<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Rolling Bible</title>
</head>
<body>
<div id="holder">
    
<script>
var settings = {
autoFontSize: true,
maxFontSize: 16,
minFontSize: 10
}
</script>
<style>
#bible-box{
width: auto;
height: 80vh;
overflow: hidden;
}
</style>
<h2 id="b-place"></h2>
<div id="bible-box"></div>

<script src="https://192.168.8.103/socket.io.js"></script>
<script>
var bPLace = document.getElementById('b-place');
var bBox = document.getElementById("bible-box");
var socket = io('https://192.168.8.103');
var bHolder = []
var bookName = ""
socket.on('bibleClock', function(data){
    if(settings.autoFontSize){
        if(bBox.clientWidth/25 > settings.maxFontSize)
            bBox.style.fontSize = settings.maxFontSize+"px"
        else if(bBox.clientWidth/25 < settings.minFontSize)
            bBox.style.fontSize = settings.minFontSize+"px"
        else        
            bBox.style.fontSize = bBox.clientWidth/25+"px"
    }
    if(data.name != bookName)
        bHolder = []
    bookName = data.name;
    bHolder.push({place: data.name+ " " +data.chapter, txt: data.txt})
    bBox.innerHTML = "";
    bPLace.innerHTML = data.name+ " " +data.chapter
    var speed = 50
    if(data.txt.length > 100) speed = 45
    if(data.txt.length > 150) speed = 40
    if(data.txt.length > 200) speed = 35
    if(data.txt.length > 250) speed = 30
    for(var i = 0; i < bHolder.length; i++){
        bBox.innerHTML += '<p>'+bHolder[i].txt+'</p>'
    }
    if(bBox.scrollTop < bBox.scrollHeight-bBox.offsetHeight){        
        var timer = setInterval(function(){
            bBox.scrollBy(0, 1)
            if(bBox.scrollTop >= bBox.scrollHeight-bBox.offsetHeight){
                clearInterval(timer)
            }
        }, speed)
    }
})
</script>
    
</div>
</body>
</html>
